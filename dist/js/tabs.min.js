window.customElements.define("kp-tabs",class extends HTMLElement{get swipe(){return this.hasAttribute("swipe")}set swipe(t){t?this.setAttribute("swipe",""):this.removeAttribute("swipe")}get animated(){return this.hasAttribute("animated")}set animated(t){t?this.setAttribute("animated",""):this.removeAttribute("animated")}get selected(){return this._selected}set selected(t){this._selected=t,this.selectTab(t),this.setAttribute("selected",t)}constructor(){super(),this._selected=null,this.xDown=null,this.yDown=null,this.threshold=10,this.attachShadow({mode:"open"})}render(){this.animated?this.animatedCss="#panels ::slotted(*) {overflow: hidden;opacity: 0;transition: all 1s;transition-timing-function: ease-in-out;min-height: 0 !important;max-height: 0 !important;padding-top: 0 !important;padding-bottom: 0 !important;}#panels ::slotted(.active) {opacity: 1;transition: opacity 1s;transition-timing-function: ease-in-out;min-height: auto !important;max-height: none !important;padding-top: none !important;padding-bottom: none !important;}":this.animatedCss="#panels ::slotted(*) {display: none;}#panels ::slotted(.active) {display: block;}",this.shadowRoot.innerHTML=`<style>:host {--tab-bg-colour: #f2f2f2;--tab-text-colour: #333;--tab-active-bg-colour: #fff;--tab-active-border-colour: #f26161;\ndisplay: block;contain: content;}#panels {padding-top: .5rem;padding-bottom: .5rem;overflow: auto;}#tabs {-webkit-user-select: none;user-select: none;}#tabs slot {display: flex;justify-content: space-between;flex-wrap: wrap;}#tabs ::slotted(*) {padding: 1rem;flex: 1;color: var( --tab-text-colour);background: var(--tab-bg-colour);border: none;justify-content: center;cursor: pointer;}#tabs ::slotted([aria-selected="true"]) {background: var(--tab-active-bg-colour);border-top: 2px solid var(--tab-active-border-colour);}#tabs ::slotted(:focus) {z-index: 1;}@media (max-width: 767px) {#tabs ::slotted(*) {flex: 0 0 100%;}}${this.animatedCss}</style><div id="tabs"><slot id="tab" name="title"></slot></div><div id="panels"><slot id="panel"></slot></div>`}connectedCallback(){this.render(),this.setAttribute("role","tablist");const t=this.shadowRoot.querySelector("#tab"),e=this.shadowRoot.querySelector("#panel");this.tabs=t.assignedNodes({flatten:!0}),this.panels=e.assignedNodes({flatten:!0}).filter(({nodeType:t})=>t===Node.ELEMENT_NODE);for(let[t,e]of this.panels.entries())e.setAttribute("role","tabpanel"),e.setAttribute("tabindex",0);this.boundOnTitleClick=this.onTitleClick.bind(this),this.boundOnKeyDown=this.onKeyDown.bind(this),t.addEventListener("click",this.boundOnTitleClick),t.addEventListener("keydown",this.boundOnKeyDown),this.selected=this.findFirstSelectedTab()||0,this.swipe&&(this.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),this.addEventListener("touchmove",this.handleTouchMove,{passive:!0}))}disconnectedCallback(){const t=this.shadowRoot.querySelector("#tab");t.removeEventListener("click",this.boundOnTitleClick),t.removeEventListener("keydown",this.boundOnKeyDown),this.swipe&&(this.removeEventListener("touchstart"),this.removeEventListener("touchmove"))}dispatchCustomEvent(t){const e=new CustomEvent(t,{bubbles:!0,cancelable:!0});e.relatedTarget=this,this.dispatchEvent(e),this.removeEventListener(t,this)}onTitleClick({target:t}){"title"===t.slot&&(this.selected=this.tabs.indexOf(t),t.focus())}prev(){let t;t=this.selected-1,t=t<0?this.tabs.length-1:t,this.tabs[t].click()}next(){const t=this.selected+1;this.tabs[t%this.tabs.length].click()}onKeyDown(t){switch(t.code){case"ArrowDown":case"ArrowLeft":t.preventDefault(),this.prev();break;case"ArrowUp":case"ArrowRight":t.preventDefault(),this.next()}}findFirstSelectedTab(){let t;for(let[e,n]of this.tabs.entries())n.setAttribute("role","tab"),n.setAttribute("type","button"),n.hasAttribute("selected")&&(t=e);return t}selectTab(t=null){for(let e,n=0;e=this.tabs[n];++n){const s=n===t;e.setAttribute("tabindex",s?0:-1),e.setAttribute("aria-selected",s),this.panels[n].setAttribute("aria-hidden",!s),s?this.panels[n].classList.add("active"):this.panels[n].classList.remove("active")}}getTouches({touches:t,targetTouches:e}){return t[0]||e[0]}handleTouchStart(t){const e=this.getTouches(t);this.xDown=e.clientX,this.yDown=e.clientY}handleTouchMove(t){if(!this.xDown||!this.yDown)return;const e=this.xDown-this.getTouches(t).clientX,n=this.yDown-this.getTouches(t).clientY;Math.abs(e)>Math.abs(n)&&Math.abs(e)>this.threshold&&(e>0?this.prev():this.next()),this.xDown=null,this.yDown=null}});